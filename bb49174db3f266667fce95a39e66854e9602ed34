refactoring and implementation of optional mask digits
