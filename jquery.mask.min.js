(function(a){var b=function(f,c,e){var g=this,d;f=a(f);c=typeof c==="function"?c(f.val(),undefined,f,e):c;g.init=function(){e=e||{};g.byPassKeys=[9,16,17,18,36,37,38,39,40,91];g.translation={"0":{pattern:/\d/},"9":{pattern:/\d/,optional:true},"#":{pattern:/\d/,recursive:true},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};g.translation=a.extend({},g.translation,e.translation);g=a.extend(true,{},g,e);f.each(function(){if(e.maxlength!==false){f.attr("maxlength",c.length)}f.attr("autocomplete","off");h.destroyEvents();h.events();h.val(h.getMasked())})};var h={getCaret:function(){var j,k=0,i=f.get(0);if(document.selection&&navigator.appVersion.indexOf("MSIE 10")===-1){i.focus();j=document.selection.createRange();j.moveStart("character",-i.value.length);k=j.text.length}else{if(i.selectionStart||i.selectionStart==="0"){k=i.selectionStart}}return k},setCaret:function(k){var i,j=f.get(0);if(j.setSelectionRange){j.focus();j.setSelectionRange(k,k)}else{if(j.createTextRange){i=j.createTextRange();i.collapse(true);i.moveEnd("character",k);i.moveStart("character",k);i.select()}}},events:function(){f.on("keydown.mask",function(){d=h.val()});f.on("keyup.mask",h.behaviour);f.on("paste.mask",function(){setTimeout(function(){f.keydown().keyup()},100)})},destroyEvents:function(){f.off("keydown.mask").off("keyup.mask").off("paste.mask")},val:function(i){var j=f.get(0).tagName.toLowerCase()==="input";return arguments.length>0?(j?f.val(i):f.text(i)):(j?f.val():f.text())},behaviour:function(k){k=k||window.event;if(a.inArray(k.keyCode||k.which,g.byPassKeys)===-1){var j,i=h.getCaret();if(i<h.val().length){j=true}h.val(h.getMasked());if(j){h.setCaret(i)}return h.callbacks(k)}},getMasked:function(){var n=[],u=h.val(),p=0,t=c.length,w=0,l=u.length,s=1,r="push",o=-1,x,k;if(e.reverse){r="unshift";s=-1;x=0;p=t-1;w=l-1;k=function(){return p>-1&&w>-1}}else{x=t-1;k=function(){return p<t&&w<l}}while(k()){var q=c.charAt(p),j=u.charAt(w),i=g.translation[q];if(i){if(j.match(i.pattern)){n[r](j);if(i.recursive){if(o===-1){o=p}else{if(p===x){p=o-s}}if(x===o){p-=s}}p+=s}else{if(i.optional){p+=s;w-=s}}w+=s}else{n[r](q);if(j===q){w+=s}p+=s}}if(t==l+1&&!g.translation[c.charAt(x)]){n.push(c.charAt(x))}return n.join("")},callbacks:function(i){var k=h.val(),j=h.val()!==d;if(j===true){if(typeof e.onChange==="function"){e.onChange(k,i,f,e)}}if(j===true&&typeof e.onKeyPress==="function"){e.onKeyPress(k,i,f,e)}if(typeof e.onComplete==="function"&&k.length===c.length){e.onComplete(k,i,f,e)}}};g.remove=function(){h.destroyEvents();h.val(g.getCleanVal()).removeAttr("maxlength")};g.getCleanVal=function(){var k=[],j=h.val();for(var i=0,l=c.length;i<l;i++){if(g.translation[c.charAt(i)]){k.push(j.charAt(i))}}return k.join("")};g.init()};a.fn.mask=function(c,d){return this.each(function(){a(this).data("mask",new b(this,c,d))})};a.fn.unmask=function(){return this.each(function(){try{a(this).data("mask").remove()}catch(c){}})};a("input[data-mask]").each(function(){var c=a(this),d={};if(c.attr("data-mask-reverse")==="true"){d.reverse=true}if(c.attr("data-mask-maxlength")==="false"){d.maxlength=false}c.mask(c.attr("data-mask"),d)})})(window.jQuery||window.Zepto);