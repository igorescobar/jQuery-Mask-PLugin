Refatorando o codigo para suportar multiplas instancias
