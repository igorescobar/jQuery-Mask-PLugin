fixing maxlength and adding a smarter mask removal. issue #18
